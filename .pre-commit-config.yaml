repos:
    - repo: https://github.com/pre-commit/pre-commit-hooks
      rev: v6.0.0
      hooks:
        - id: trailing-whitespace
          exclude: \.md$
        - id: end-of-file-fixer
          exclude: \.md$
        - id: check-yaml
        - id: check-added-large-files
        - id: check-merge-conflict
    - repo: local
      hooks:
        - id: go-fmt
          name: go fmt
          entry: gofmt
          args:
            - -w
          description: Runs gofmt, requires golang
          language: system
          files: \.go$
        - id: go-vet
          name: go vet
          entry: go
          args:
            - vet
            - ./...
          description: Runs go vet, requires golang
          language: system
          files: \.go$
          pass_filenames: false
        - id: go-mod-tidy
          name: go mod tidy
          entry: go
          args:
            - mod
            - tidy
          description: Runs go mod tidy, requires golang
          language: system
          files: (go\.mod|go\.sum|\.go)$
          pass_filenames: false
    - repo: local
      hooks:
        - id: antimoji-clean
          name: Auto-clean Emojis
          entry: antimoji
          args:
            - clean
            - --config=.antimoji.yaml
            - --profile=zero-tolerance
            - --in-place
            - --quiet
          description: Remove all emojis from source code files
          language: system
          files: \.(go|js|ts|jsx|tsx|py|rb|java|c|cpp|h|hpp|rs|php|swift|kt|scala)$
          exclude: (?x)^(.*_test\.go|.*/test/.*|.*/tests/.*|.*/testdata/.*|.*/fixtures/.*|.*/mocks/.*|vendor/.*|dist/.*|bin/.*|.*\.md$|docs/.*|\.antimoji\.yaml$|internal/core/detector/detector\.go|internal/core/allowlist/allowlist\.go|internal/config/templates\.go)$
          pass_filenames: true
          require_serial: true
        - id: antimoji-verify
          name: Emoji Verification
          entry: antimoji
          args:
            - scan
            - --config=.antimoji.yaml
            - --profile=zero-tolerance
            - --threshold=0
            - --quiet
          description: Strict verification - no emojis allowed in source code
          language: system
          files: \.(go|js|ts|jsx|tsx|py|rb|java|c|cpp|h|hpp|rs|php|swift|kt|scala)$
          exclude: (?x)^(.*_test\.go|.*/test/.*|.*/tests/.*|.*/testdata/.*|.*/fixtures/.*|.*/mocks/.*|vendor/.*|dist/.*|bin/.*|.*\.md$|docs/.*|\.antimoji\.yaml$|internal/core/detector/detector\.go|internal/core/allowlist/allowlist\.go|internal/config/templates\.go)$
          pass_filenames: true
          require_serial: true
